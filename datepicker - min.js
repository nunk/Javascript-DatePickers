function datepicker(e){function t(){g.innerHTML=dateObject.getLongMonth()+" "+dateObject.getYear();var e=document.createElement("table"),t=document.createElement("tr");null!=l.firstChild&&(l.innerHTML="");for(var a=1;8>a;a++){var r=document.createElement("td"),d=document.createElement("a");d.addEventListener("click",n,!1),d.className="dayNum",a<dateObject.getDayOfWeekMonthStarts()?r.innerHTML="":(c=d.innerHTML=a-dateObject.getDayOfWeekMonthStarts()+1,r.appendChild(d)),t.appendChild(r)}e.appendChild(t);for(var a=1;5>=a;a++){for(var t=document.createElement("tr"),o=1;7>=o;o++){var d=document.createElement("a");if(d.className="dayNum",++c<=dateObject.getNumdays()){d.innerHTML=c,d.addEventListener("click",n,!1);var r=document.createElement("td");r.appendChild(d),t.appendChild(r)}}e.appendChild(t)}e.appendChild(t),l.appendChild(e),console.log(l),console.log(l.firstChild),i.appendChild(l),document.body.appendChild(i)}function n(e){d.value=dateObject.getYear()+"-"+dateObject.getLongMonth().substr(0,3)+"-"+("0"+e.target.innerHTML).slice(-2),i.style.display="none"}function a(e,t){for(;e.parentNode;){if(e==t)return!0;e=e.parentNode}return!1}function r(e){switch(e.target.id){case"nextClick":dateObject.date=new Date(dateObject.getYear(),dateObject.getMonth()+1,1);break;case"prevClick":dateObject.date=new Date(dateObject.getYear(),dateObject.getMonth()-1,1)}t()}var d,c,i=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),s=document.createElement("div"),u=function(e,t){var n=document.createElement("a");return n.innerHTML=e,n.id=t,n.addEventListener("click",r,!0),n};s.className="triangle-up",i.className="calendarContainer",i.appendChild(o),o.className="calTop",l.className="calBody",i.appendChild(s);var h=document.createElement("table"),p=document.createElement("tr"),m=document.createElement("td");m.appendChild(new u("<<","prevClick")),p.appendChild(m);var g=document.createElement("td");g.colSpan="5",p.appendChild(g);var m=document.createElement("td");m.appendChild(new u(">>","nextClick")),p.appendChild(m),h.appendChild(p);for(var p=document.createElement("tr"),f=0;7>f;f++){var b="SMTWTFS",m=document.createElement("td");m.innerHTML=b[f],p.appendChild(m)}h.appendChild(p),o.appendChild(h);document.createElement("table");t();for(var v=document.querySelectorAll("input#datepicker,input.datepicker"),f=0;f<v.length;f++)v[f].readOnly="true",v[f].addEventListener("click",function(e){d=e.target,dateObject.getDate(e.target),g.innerHTML=dateObject.getLongMonth()+" "+dateObject.getYear(),i.style.top=10+e.target.offsetHeight+e.target.offsetTop+"px",i.style.left=e.target.offsetLeft+"px",i.style.display="block",t(),i.focus()},!0);document.body.addEventListener("click",function(e){a(e.target,i)||(i.style.display="none")},!0)}var dateObject={date:new Date,getDate:function(e){return""!=e.value.trim()?this.date=new Date(e.value.substr(0,4),this.shortMonths.indexOf(e.value.substr(5,3)),1):this.date=new Date,console.log(this.date),this.date},monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],getYear:function(){return this.date.getFullYear()},getMonth:function(){return this.date.getMonth()},getFirstDayOfMonth:function(){return new Date(this.getYear(),this.getMonth(),1).toString().substr(0,3)},getDayOfWeekMonthStarts:function(){return 1+this.daysOfWeek.indexOf(this.getFirstDayOfMonth())},getNumdays:function(){return new Date(this.getYear(),this.getMonth()+1,0).getDate()},setDate:function(e){this.date=new Date(this.date.setDate(e))},getLongMonth:function(){return this.monthsOfYear[this.getMonth()]}};